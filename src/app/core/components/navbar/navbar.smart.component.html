<nav
  class="text-base sm:text-lg md:text-2xl bg-primary text-white shadow-xs shadow-secondary p-2 fixed top-0 w-screen z-50 overflow-x-hidden"
>
  <div
    class="w-full px-4 flex items-center justify-between min-h-[4rem] md:min-h-[4.5rem] max-w-screen-2xl mx-auto"
  >
    <!-- Logo -->
    <a
      class="text-lg sm:text-xl md:text-2xl font-bold flex-none flex items-center gap-2 truncate"
      routerLink="/"
    >
      <div class="flex items-center group">
        <img
          class="w-8 h-8 sm:w-10 sm:h-10 md:w-12 md:h-12 transform transition-all duration-500 group-hover:rotate-180 flex-shrink-0"
          height="24"
          width="24"
          alt="Logo"
          ngSrc="/images/navbar/code.svg"
        />
        <div class="flex items-baseline truncate">
          <span>djoudj</span>
          <span class="text-tertiary">.</span>
          <span>dev</span>
        </div>
      </div>
    </a>

    <!-- Menu Desktop -->
    <ul class="hidden md:flex items-center gap-x-8">
      @for (item of navigationItems(); track item.href) {
        <li class="group">
          <a
            routerLinkActive="font-bold"
            class="text-xl font-bold text-white/80 hover:text-[#ffd700] transition-all duration-300 relative"
            [routerLink]="item.href"
          >
            {{ item.label }}
            <span
              class="absolute -bottom-1 left-0 w-full h-0.5 bg-[#ffd700] transform origin-left transition-transform duration-300 scale-x-0 group-hover:scale-x-100"
            ></span>
          </a>
        </li>
      }
    </ul>

    <!-- Zone boutons (Desktop uniquement) -->
    <div class="hidden md:flex items-center gap-x-4 mb-4">
      <app-button
        variant="accent"
        class="!h-8 !px-4 flex items-center hover:scale-105 transition-all duration-300 text-base"
        [title]="'Réservez votre appel'"
        [type]="'button'"
        [img]="'/images/mobile/phone.svg'"
        (click)="onCallClick()"
      />

      <button
        class="h-8 w-8 flex items-center justify-center focus:outline-none hover:scale-105 transition-all duration-300 group relative mt-2"
        aria-label="DarkMode"
        (click)="toggleDarkMode()"
      >
        <img
          class="w-10 h-10 transition-all duration-300 hover:brightness-125 mt-2"
          height="24"
          width="24"
          alt="DarkMode"
          [ngSrc]="darkMode ? '/images/mobile/light.svg' : '/images/mobile/moon.svg'"
        />
        <span
          class="absolute -bottom-1 left-0 w-full h-0.5 bg-[#ffd700] transform origin-left transition-transform duration-300 scale-x-0 group-hover:scale-x-100"
        ></span>
      </button>

      <a
        class="h-8 w-8 flex items-center justify-center focus:outline-none hover:scale-105 transition-all duration-300 group relative mt-2"
        routerLink="/settings"
        aria-label="Paramètres"
      >
        <img
          ngSrc="/images/mobile/settings.svg"
          alt="Settings"
          class="w-10 h-10 transition-all duration-300 hover:brightness-125 mt-2"
          height="24"
          width="24"
        />
        <span
          class="absolute -bottom-1 left-0 w-full h-0.5 bg-[#ffd700] transform origin-left transition-transform duration-300 scale-x-0 group-hover:scale-x-100"
        ></span>
      </a>
    </div>

    <!-- Icône DarkMode et menu hamburger -->
    <div class="flex items-center gap-4">
      <button
        class="h-8 w-8 flex items-center justify-center focus:outline-none hover:scale-105 transition-all duration-300 relative"
        aria-label="DarkMode"
        (click)="toggleDarkMode()"
      >
        <img
          class="w-8 h-8 transition-all duration-300 hover:brightness-125"
          height="24"
          width="24"
          alt="DarkMode"
          [ngSrc]="darkMode ? '/images/mobile/light.svg' : '/images/mobile/moon.svg'"
        />
      </button>
      <button
        class="h-8 w-8 flex items-center justify-center focus:outline-none hover:scale-105 transition-all duration-300 relative"
        aria-label="Ouvrir/fermer le menu"
        (click)="toggleMenu()"
      >
        <img
          class="w-8 h-8"
          height="24"
          width="24"
          [ngSrc]="menuIsOpen ? '/images/mobile/close.svg' : '/images/mobile/open.svg'"
          [alt]="menuIsOpen ? 'Fermer le menu' : 'Ouvrir le menu'"
        />
      </button>
    </div>
  </div>

  <!-- Menu Mobile -->
  <div
    id="mobile-menu"
    class="fixed inset-x-0 top-0 h-[60vh] w-screen bg-primary/95 backdrop-blur-md text-white text-center transform transition-transform duration-300 md:hidden pt-20 pb-8 overflow-y-auto"
    [ngClass]="menuIsOpen ? 'translate-y-0' : '-translate-y-full'"
    (click)="$event.stopPropagation()"
  >
    <div class="flex flex-col items-center justify-start h-full px-4">
      <ul class="w-full max-w-sm space-y-2">
        <li class="p-4">
          <a
            routerLink="/home#about"
            routerLinkActive="font-bold"
            class="block w-full text-lg hover:text-tertiary transition-all duration-300"
            (click)="toggleMenu()"
            >À propos</a
          >
        </li>
        <li class="p-4">
          <a
            routerLink="/home#skills"
            routerLinkActive="font-bold"
            class="block w-full text-lg hover:text-tertiary transition-all duration-300"
            (click)="toggleMenu()"
            >Skills</a
          >
        </li>
        <li class="p-4">
          <a
            routerLink="/home#projects"
            routerLinkActive="font-bold"
            class="block w-full text-lg hover:text-tertiary transition-all duration-300"
            (click)="toggleMenu()"
            >Projets</a
          >
        </li>
        <li class="p-4">
          <a
            routerLink="/home#contact"
            routerLinkActive="font-bold"
            class="block w-full text-lg hover:text-tertiary transition-all duration-300"
            (click)="toggleMenu()"
            >Contact</a
          >
        </li>
        <li class="p-4">
          <a
            routerLink="/settings"
            routerLinkActive="font-bold"
            class="block w-full text-lg hover:text-tertiary transition-all duration-300"
            (click)="toggleMenu()"
            >Settings</a
          >
        </li>
      </ul>

      <!-- Actions mobile -->
      <div class="mt-4">
        <app-button
          variant="accent"
          [title]="'Réservez votre appel'"
          [type]="'button'"
          [img]="'/images/mobile/phone.svg'"
          (click)="onCallClick()"
        />
      </div>
    </div>
  </div>
</nav>
